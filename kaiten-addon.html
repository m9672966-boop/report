<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Test Addon</title>
  <!-- Подключаем Kaiten Web SDK -->
  <script src="https://files.kaiten.ru/web-sdk/v1.min.js"></script>
  <script>
    // Ждем загрузки SDK
    function initializeAddon() {
      if (window.Addon) {
        try {
          window.Addon.initialize({
            card_buttons: function() {
              return [{
                text: '✅ Тест',
                callback: function(ctx) {
                  // Открываем приложение в новой вкладке
                  const appUrl = 'https://kaiten-report-generator.onrender.com';
                  window.open(appUrl, '_blank');
                }
              }];
            }
          });
          console.log('✅ Addon initialized');
        } catch (error) {
          console.error('❌ Addon error:', error);
        }
      } else {
        console.error('❌ Kaiten SDK not found');
        // Повторная попытка через 2 секунды
        setTimeout(initializeAddon, 2000);
      }
    }

    // Запускаем инициализацию
    document.addEventListener('DOMContentLoaded', initializeAddon);
  </script>
  <style>
    body { 
      background: transparent; 
      margin: 0; 
      padding: 0; 
      font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
  <div style="padding: 10px; color: #666; font-size: 12px;">
    Kaiten Report Addon loaded
  </div>
</body>
</html>
